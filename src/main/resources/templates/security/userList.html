<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link th:replace="~{fragments/header :: bootstrap-css}"/>
  <link th:replace="~{fragments/header :: css}"/>
  <link th:replace="~{fragments/header :: bootstrap-icons}"/>

  <title>User List</title>
</head>
<body>
<div th:replace="~{fragments/header :: navbar}"/>

<div class="container">

  <h2 class="h2 text-center m-5">User List</h2>

    <table class="table table-bordered">
      <thead>
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Enabled</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>

      <tr th:each="user : ${users}">
        <td th:text="${user.id}"></td>
        <td th:text="${user.username}"></td>
        <td th:text="${user.enabled} ? 'Enabled' : 'Disabled'"></td>
        <td>
          <div class="d-flex">
            <form class="mx-1" th:action="@{/disableUser}" method="post">
              <input type="hidden" th:name="userId" th:value="${user.id}"/>
              <button class="btn btn-primary" type="submit">Disable</button>
            </form>
            <form class="mx-1" th:action="@{/enableUser}" method="post">
              <input type="hidden" th:name="userId" th:value="${user.id}"/>
              <button class="btn btn-primary btn-primary" type="submit">Enable</button>
            </form>
            <form class="mx-1" th:action="@{/deleteUser}" method="post" onsubmit="return confirm('Are you sure you want to delete this user?')">
              <input type="hidden" th:name="userId" th:value="${user.id}"/>
              <button class="btn btn-danger btn-secondary" type="submit">DELETE</button>
            </form>
          </div>
        </td>
      </tr>
      </tbody>
    </table>

  <div>
    <a th:href="@{/register}" class="btn btn-primary">Register User</a>
  </div>

</div>
</body>

<div th:replace="~{fragments/footer :: footer-links}" class="mt-auto"></div>
<div th:replace="~{fragments/footer :: bootstrap-js}"></div>
<div th:replace="~{fragments/footer :: js}"></div>
</html>
